(()=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===_typeof(c)?c:String(c)),i)}var a,c}function productAPI_typeof(t){return productAPI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},productAPI_typeof(t)}function productAPI_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function productAPI_toPrimitive(t,r){if("object"!==productAPI_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==productAPI_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===productAPI_typeof(c)?c:String(c)),i)}var a,c}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===productAPI_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var t=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(ProductAPI,t);var r=_createSuper(ProductAPI);function ProductAPI(t,o,i){var a;return function productAPI_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProductAPI),(a=r.call(this,o,i)).cdn=t,a}return function productAPI_createClass(t,r,o){return r&&productAPI_defineProperties(t.prototype,r),o&&productAPI_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ProductAPI,[{key:"getProductItem",value:function getProductItem(t){var r=this;return this.get("/product/".concat(t)).then((function(t){return Object.assign(Object.assign({},t),{image:r.cdn+t.image})}))}},{key:"getProductList",value:function getProductList(){var t=this;return this.get("/product").then((function(r){return r.items.map((function(r){return Object.assign(Object.assign({},r),{image:t.cdn+r.image})}))}))}},{key:"orderProduct",value:function orderProduct(t){return this.post("/order",t).then((function(t){return t}))}}]),ProductAPI}(function(){function Api(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(r=o.headers)&&void 0!==r?r:{})}}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(r){var o;return Promise.reject(null!==(o=r.error)&&void 0!==o?o:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:o,body:JSON.stringify(r)})).then(this.handleResponse)}}]),Api}()),r="".concat("","/api/weblarek"),o="".concat("","/content/weblarek"),i="card-catalog",a="card-preview",c="card-basket",u="basket",l="order",p="contacts",d="success",y="modal-container",m={headerBasketCounter:".header__basket-counter",gallery:".gallery",pageWrapper:".page__wrapper",headerBasket:".header__basket"};function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,r){if(isSelector(t)){var o=function ensureAllElements(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(r.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,r);if(o.length>1&&console.warn("selector ".concat(t," return more then one element")),0===o.length)throw new Error("selector ".concat(t," return nothing"));return o.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementData(t,r){for(var o in r)t.dataset[o]=String(r[o])}function createElement(t,r,o){var i,a,c=document.createElement(t);if(r)for(var u in r){var l=r[u];i=l,a=void 0,(a=Object.getPrototypeOf(i))!==Object.getPrototypeOf({})&&null!==a||"dataset"!==u?c[u]="boolean"==typeof l?l:String(l):setElementData(c,l)}if(o){var p,d=function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw c}}}}(Array.isArray(o)?o:[o]);try{for(d.s();!(p=d.n()).done;){var y=p.value;c.append(y)}}catch(t){d.e(t)}finally{d.f()}}return c}function events_typeof(t){return events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},events_typeof(t)}function events_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function events_toPrimitive(t,r){if("object"!==events_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==events_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===events_typeof(c)?c:String(c)),i)}var a,c}var h=function(){function EventEmitter(){!function events_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function events_createClass(t,r,o){return r&&events_defineProperties(t.prototype,r),o&&events_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,r){var o;this._events.has(t)||this._events.set(t,new Set),null===(o=this._events.get(t))||void 0===o||o.add(r)}},{key:"off",value:function off(t,r){var o;this._events.has(t)&&(this._events.get(t).delete(r),0===(null===(o=this._events.get(t))||void 0===o?void 0:o.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,r){this._events.forEach((function(o,i){(i instanceof RegExp&&i.test(t)||i===t)&&o.forEach((function(t){return t(r)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,r){var o=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(t,Object.assign(Object.assign({},i||{}),r||{}))}}}]),EventEmitter}();function abstract_typeof(t){return abstract_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},abstract_typeof(t)}function abstract_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function abstract_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function abstract_toPrimitive(t,r){if("object"!==abstract_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==abstract_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===abstract_typeof(c)?c:String(c)),i)}var a,c}function abstract_createClass(t,r,o){return r&&abstract_defineProperties(t.prototype,r),o&&abstract_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var _=function(){function Component(t){abstract_classCallCheck(this,Component),this.container=t}return abstract_createClass(Component,[{key:"toggleClass",value:function toggleClass(t,r,o){t.classList.toggle(r,o)}},{key:"setText",value:function setText(t,r,o){t.textContent=String(r)+(o||"")}},{key:"setDisabled",value:function setDisabled(t,r){null==t||t.toggleAttribute("disabled",r)}},{key:"setHide",value:function setHide(t){t.style.display="none"}},{key:"setVisible",value:function setVisible(t){null==t||t.style.removeProperty("display")}},{key:"setImage",value:function setImage(t,r,o){t.src=r,t.alt=o}},{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}(),b=function(){function objectModel(t,r){abstract_classCallCheck(this,objectModel),this.event=r,Object.assign(this,t)}return abstract_createClass(objectModel,[{key:"emitChanges",value:function emitChanges(t,r){this.event.emit(t,null!=r?r:{})}}]),objectModel}();function page_typeof(t){return page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},page_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return page_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function page_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return page_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return page_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function page_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function page_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function page_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function page_toPrimitive(t,r){if("object"!==page_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==page_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===page_typeof(c)?c:String(c)),i)}var a,c}function page_createClass(t,r,o){return r&&page_defineProperties(t.prototype,r),o&&page_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function page_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&page_setPrototypeOf(t,r)}function page_setPrototypeOf(t,r){return page_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},page_setPrototypeOf(t,r)}function page_createSuper(t){var r=function page_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=page_getPrototypeOf(t);if(r){var a=page_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function page_possibleConstructorReturn(t,r){if(r&&("object"===page_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function page_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function page_getPrototypeOf(t){return page_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},page_getPrototypeOf(t)}var v=function(t){page_inherits(Page,t);var r=page_createSuper(Page);function Page(t,o){var i;page_classCallCheck(this,Page),(i=r.call(this,t)).events=o;var a=function getElement(t){return ensureElement(t,i.container)};return i._counter=a(m.headerBasketCounter),i._catalogue=a(m.gallery),i._wrapper=a(m.pageWrapper),i._basket=a(m.headerBasket),i._basket.addEventListener("click",(function(){return i.events.emit("basket:open")})),i}return page_createClass(Page,[{key:"counter",set:function set(t){this.setText(this._counter,String(t))}},{key:"catalogue",set:function set(t){var r;(r=this._catalogue).replaceChildren.apply(r,_toConsumableArray(t))}},{key:"locked",set:function set(t){this.toggleClass(this._wrapper,"page__wrapper_locked",t)}}]),Page}(_),g=function(t){page_inherits(State,t);var r=page_createSuper(State);function State(){var t;return page_classCallCheck(this,State),(t=r.apply(this,arguments)).order={email:"",phone:"",address:"",payment:"",total:null,items:[]},t.formOrderErrors={},t.formContactsErrors={},t}return page_createClass(State,[{key:"toggleOrderItem",value:function toggleOrderItem(t,r){this.order.items=r?_toConsumableArray(new Set([].concat(_toConsumableArray(this.order.items),[t]))):this.order.items.filter((function(r){return r!==t}))}},{key:"clearBasket",value:function clearBasket(){var t=this;this.order.items.forEach((function(r){return t.toggleOrderItem(r,!1)})),this.clearOrderFields(),this.emitChanges("basket:changed",{order:this.order})}},{key:"total",value:function total(){var t=this;return this.order.total=this.order.items.reduce((function(r,o){var i;return r+Number((null===(i=t.catalogue.find((function(t){return t.id===o})))||void 0===i?void 0:i.price)||0)}),0)}},{key:"setCatalogue",value:function setCatalogue(t){this.catalogue=t,this.emitChanges("items:changed",{catalogue:this.catalogue})}},{key:"getCards",value:function getCards(){var t=this;return this.catalogue.filter((function(r){return t.order.items.includes(r.id)}))}},{key:"isFilledFieldsOrder",value:function isFilledFieldsOrder(){return!!this.order.address&&!!this.order.payment}},{key:"isFilledFieldsContacts",value:function isFilledFieldsContacts(){return!!this.order.email&&!!this.order.phone}},{key:"clearOrderFields",value:function clearOrderFields(){this.order.email="",this.order.address="",this.order.payment="",this.order.phone=""}},{key:"setField",value:function setField(t,r){this.order[t]=r,["address","payment"].includes(t)&&this.validateOrder(),["email","phone"].includes(t)&&this.validateContacts()}},{key:"validateOrder",value:function validateOrder(){var t={};return this.order.address||(t.address="Необходимо указать адрес"),this.order.payment||(t.payment="Необходимо указать способ оплаты"),this.formOrderErrors=t,this.event.emit("formOrderErrors:change",this.formOrderErrors),0===Object.keys(t).length}},{key:"validateContacts",value:function validateContacts(){var t={};return this.order.email||(t.email="Необходимо указать email"),this.order.phone||(t.phone="Необходимо указать телефон"),this.formContactsErrors=t,this.event.emit("formContactsErrors:change",this.formContactsErrors),0===Object.keys(t).length}}]),State}(b),k=function(t){page_inherits(Card,t);var r=page_createSuper(Card);function Card(t,o,i){var a;page_classCallCheck(this,Card),(a=r.call(this,o)).blockName=t;var c=function getElement(t){return ensureElement(t,o)};return a._title=c(".".concat(t,"__title")),a._image=o.querySelector(".".concat(t,"__image")),a._price=c(".".concat(t,"__price")),a._category=o.querySelector(".".concat(t,"__category")),a._buttonModal=o.querySelector(".".concat(t,"__button")),a._description=o.querySelector(".".concat(t,"__text")),(null==i?void 0:i.onClick)&&(a._buttonModal?(a._buttonModal.textContent="Купить",a._buttonModal.addEventListener("click",i.onClick)):o.addEventListener("click",i.onClick)),a}return page_createClass(Card,[{key:"isEmpty",value:function isEmpty(t){return t?this.setText(this._buttonModal,"В корзину"):this.setText(this._buttonModal,"Купить")}},{key:"id",get:function get(){return this.container.dataset.id||""},set:function set(t){this.container.dataset.id=t}},{key:"title",get:function get(){return this._title.textContent||""},set:function set(t){this.setText(this._title,t)}},{key:"image",set:function set(t){this.setText(this._image,t)}},{key:"price",set:function set(t){this.setText(this._price,t+" синапсов"),t||(this._price.textContent="",this.setDisabled(this._buttonModal,!0))}},{key:"category",set:function set(t){var r=function bem(t,r,o){var i=t;return r&&(i+="__".concat(r)),o&&(i+="_".concat(o)),{name:i,class:".".concat(i)}}(this.blockName,"category",{"софт-скил":"soft","хард-скил":"hard",кнопка:"button",другое:"other",дополнительное:"additional"}[t]).name;this.setText(this._category,t),this.toggleClass(this._category,r,!0)}},{key:"description",set:function set(t){var r,o,i=this;Array.isArray(t)&&(null===(r=this._description)||void 0===r||(o=r).replaceWith.apply(o,_toConsumableArray(t.map((function(t){var r,o=null===(r=i._description)||void 0===r?void 0:r.cloneNode(!0);return i.setText(o,t),o})))))}}]),Card}(_);function popup_typeof(t){return popup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},popup_typeof(t)}function popup_toConsumableArray(t){return function popup_arrayWithoutHoles(t){if(Array.isArray(t))return popup_arrayLikeToArray(t)}(t)||function popup_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function popup_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return popup_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return popup_arrayLikeToArray(t,r)}(t)||function popup_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function popup_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function popup_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function popup_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function popup_toPrimitive(t,r){if("object"!==popup_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==popup_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===popup_typeof(c)?c:String(c)),i)}var a,c}function popup_createClass(t,r,o){return r&&popup_defineProperties(t.prototype,r),o&&popup_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=popup_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},_get.apply(this,arguments)}function popup_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&popup_setPrototypeOf(t,r)}function popup_setPrototypeOf(t,r){return popup_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},popup_setPrototypeOf(t,r)}function popup_createSuper(t){var r=function popup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=popup_getPrototypeOf(t);if(r){var a=popup_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function popup_possibleConstructorReturn(t,r){if(r&&("object"===popup_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return popup_assertThisInitialized(t)}(this,o)}}function popup_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function popup_getPrototypeOf(t){return popup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},popup_getPrototypeOf(t)}var __rest=function(t,r){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)r.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(o[i[a]]=t[i[a]])}return o},C=function(t){popup_inherits(PopupComponent,t);var r=popup_createSuper(PopupComponent);function PopupComponent(t,o){var i;return popup_classCallCheck(this,PopupComponent),(i=r.call(this,t)).events=o,i._closeBtn=ensureElement(".modal__close",i.container),i._content=ensureElement(".modal__content",i.container),i._closeBtn.addEventListener("click",i.close.bind(popup_assertThisInitialized(i))),i.container.addEventListener("click",i.close.bind(popup_assertThisInitialized(i))),i._content.addEventListener("click",(function(t){return t.stopPropagation()})),i}return popup_createClass(PopupComponent,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"open",value:function open(){this.container.classList.add("modal_active"),this.events.emit("modal:open")}},{key:"close",value:function close(){this.container.classList.remove("modal_active"),this.content=null,this.events.emit("modal:close")}},{key:"render",value:function render(t){return _get(popup_getPrototypeOf(PopupComponent.prototype),"render",this).call(this,t),this.open(),this.container}}]),PopupComponent}(_),P=function(t){popup_inherits(Basket,t);var r=popup_createSuper(Basket);function Basket(t,o){var i;return popup_classCallCheck(this,Basket),(i=r.call(this,t)).events=o,i._list=ensureElement(".basket__list",i.container),i._total=i.container.querySelector(".basket__price"),i._button=i.container.querySelector(".basket__button"),i._button.addEventListener("click",(function(){o.emit("order:open")})),i.items=[],i}return popup_createClass(Basket,[{key:"items",get:function get(){return 0===this._list.childElementCount?[createElement("p",{textContent:"Корзина пуста"})]:Array.from(this._list.children)},set:function set(t){var r;t.length?(r=this._list).replaceChildren.apply(r,popup_toConsumableArray(t)):this._list.replaceChildren(createElement("p",{textContent:"Корзина пуста"}))}},{key:"selected",set:function set(t){t.length?this.setDisabled(this._button,!1):this.setDisabled(this._button,!0)}},{key:"total",set:function set(t){this.setText(this._total,t+" синапсов")}}]),Basket}(_),O=function(t){popup_inherits(Form,t);var r=popup_createSuper(Form);function Form(t,o){var i;return popup_classCallCheck(this,Form),(i=r.call(this,t)).container=t,i.events=o,i._errors=ensureElement(".form__errors",i.container),i.container.addEventListener("input",(function(t){var r=t.target,o=r.name,a=r.value;i.onInputChange(o,a)})),i}return popup_createClass(Form,[{key:"onInputChange",value:function onInputChange(t,r){this.events.emit("order:change",{field:t,value:r})}},{key:"onPaymentChange",value:function onPaymentChange(t){console.log("Payment method changed:",t),this.events.emit("order:change",{field:"payment",value:t})}},{key:"errors",set:function set(t){this.setText(this._errors,t)}},{key:"render",value:function render(t){var r=t.validation,o=t.errors,i=__rest(t,["validation","errors"]);return _get(popup_getPrototypeOf(Form.prototype),"render",this).call(this,{validation:r,errors:o}),Object.assign(this,i),this.container}}]),Form}(_),S=function(t){popup_inherits(Contact,t);var r=popup_createSuper(Contact);function Contact(t,o){var i;return popup_classCallCheck(this,Contact),(i=r.call(this,t,o))._submit=ensureElement("button[type=submit]",i.container),i.container.addEventListener("submit",(function(t){t.preventDefault(),i.events.emit("order:submit")})),i}return popup_createClass(Contact,[{key:"valid",set:function set(t){this._submit.disabled=!t}},{key:"phone",set:function set(t){this.container.elements.namedItem("phone").value=t}},{key:"email",set:function set(t){this.container.elements.namedItem("email").value=t}}]),Contact}(O),w=function(t){popup_inherits(Order,t);var r=popup_createSuper(Order);function Order(t,o){var i;return popup_classCallCheck(this,Order),(i=r.call(this,t,o))._submit=ensureElement("button[type=submit]",i.container),i._btn=t.querySelector("[name=cash]"),i._btnCard=t.querySelector("[name=card]"),i._btn&&i._btn.addEventListener("click",(function(){console.log("Button clicked - offline"),i.onPaymentChange("offline"),i._btn.classList.add("button_alt-active"),i._btnCard&&i._btnCard.classList.remove("button_alt-active")})),i._btnCard&&i._btnCard.addEventListener("click",(function(){console.log("Button clicked - online"),i.onPaymentChange("online"),i._btnCard.classList.add("button_alt-active"),i._btn&&i._btn.classList.remove("button_alt-active")})),i.container.addEventListener("submit",(function(t){t.preventDefault(),i.events.emit("contacts:open")})),i}return popup_createClass(Order,[{key:"valid",set:function set(t){this._submit.disabled=!t}},{key:"address",set:function set(t){this.container.elements.namedItem("address").value=t}}]),Order}(O),E=function(t){popup_inherits(BasketItem,t);var r=popup_createSuper(BasketItem);function BasketItem(t,o){var i;return popup_classCallCheck(this,BasketItem),(i=r.call(this,"card",t))._index=t.querySelector(".basket__item-index"),i._btn=t.querySelector(".basket__item-delete"),i._btn.addEventListener("click",o.onClick),i}return popup_createClass(BasketItem,[{key:"index",set:function set(t){this.setText(this._index,t)}}]),BasketItem}(k),j=function(t){popup_inherits(Success,t);var r=popup_createSuper(Success);function Success(t,o){var i;return popup_classCallCheck(this,Success),(i=r.call(this,t))._total=ensureElement(".order-success__description",i.container),i._close=ensureElement(".button",i.container),i._close.addEventListener("click",o.onClick),i}return popup_createClass(Success,[{key:"total",set:function set(t){var r=1===t?"синапс":"синапсов";this.setText(this._total,"Списано ".concat(t," ").concat(r))}}]),Success}(_),A=new t(o,r),T=new h,I=ensureElement("#".concat(i)),x=ensureElement("#".concat(a)),L=ensureElement("#".concat(u)),R=ensureElement("#".concat(c)),B=ensureElement("#".concat(l)),M=ensureElement("#".concat(p)),N=ensureElement("#".concat(d)),D=new g({},T),q=new v(document.body,T),U=new C(ensureElement("#".concat(y)),T),z=new P(cloneTemplate(L),T),H=new w(cloneTemplate(B),T),W=new S(cloneTemplate(M),T);T.on("basket:open",(function(){console.log("Event basket:open was handled"),U.render({content:z.render()})})),console.log("CDN_URL:",o),console.log("API_URL:",r),console.log("Basket Render Content:",z.render()),T.on("items:changed",(function(){console.log("Items changed event triggered"),console.log("Current state catalogue:",D.catalogue),q.catalogue=D.catalogue.map((function(t){return new k("card",cloneTemplate(I),{onClick:function onClick(){T.emit("card:select",t)}}).render({id:t.id,title:t.title,image:t.image,price:t.price,category:t.category})}))})),T.on("basket:changed",(function(){z.items=D.getCards().map((function(t,r){var o=new E(cloneTemplate(R),{onClick:function onClick(){D.toggleOrderItem(t.id,!1),q.counter=D.order.items.length,z.items=z.items.filter((function(r){return r.dataset.id!==t.id})),z.total=D.total(),z.selected=D.order.items}});return o.render({id:t.id,title:t.title,price:t.price,index:r+1})})),q.counter=D.order.items.length,z.total=D.total(),z.selected=D.order.items})),T.on("card:select",(function(t){t?(console.log("item"+t),A.getProductItem(t.id).then((function(r){var o=new k("card",cloneTemplate(x),{onClick:function onClick(o){var i=o.target;"Купить"===i.textContent?(i.textContent="В корзину",D.toggleOrderItem(r.id,!0),q.counter=D.order.items.length,T.emit("basket:changed")):"В корзину"===i.textContent&&T.emit("basket:open",t)}});o.isEmpty(D.order.items.includes(r.id)),U.render({content:o.render({title:r.title,image:r.image,description:r.description,price:r.price,category:r.category})})})).catch((function(r){console.error("theres not item: "+t),console.error("theres more long "+r)}))):U.close()})),T.on("order:open",(function(){U.render({content:H.render({address:D.order.address,validation:D.isFilledFieldsOrder(),errors:[]})})})),T.on("contacts:open",(function(){U.render({content:W.render({email:D.order.email,phone:D.order.phone,validation:D.isFilledFieldsContacts(),errors:[]})})})),T.on("formOrderErrors:change",(function(t){var r=t.address,o=t.payment;H.valid=!r&&!o,H.errors=Object.values({address:r,payment:o}).filter((function(t){return!!t})).join("; ")})),T.on("formContactsErrors:change",(function(t){var r=t.email,o=t.phone;W.valid=!r&&!o,W.errors=Object.values({email:r,phone:o}).filter((function(t){return!!t})).join("; ")})),T.on("modal:open",(function(){q.locked=!0})),T.on("modal:close",(function(){q.locked=!1})),T.on("order:submit",(function(){A.orderProduct(D.order).then((function(t){D.clearBasket();var r=new j(cloneTemplate(N),{onClick:function onClick(){U.close()}});U.render({content:r.render({total:t.total})})})).catch((function(t){console.error(t)}))})),T.on("order:change",(function(t){console.log("shto takoe data"+t.value),D.setField(t.field,t.value)})),A.getProductList().then(D.setCatalogue.bind(D)).catch((function(t){console.error(t)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQUFBLFVBQ0wyRSxFQUFNckQsT0FDVixJQUVKcUQsRUFBTS9JLE9BQU8sQ0FDVHBFLFFBQVNtTyxFQUFRL0osT0FBTyxDQUNwQjBCLE1BQU84SCxFQUFJOUgsU0FHdkIsSUFBRSxPQUNTLFNBQUN2RSxHQUNSN0IsUUFBUTlCLE1BQU0yRCxFQUNsQixHQUNKLElBRUFvRCxFQUFPOUMsR0FBRyxnQkFBZ0IsU0FBQ25GLEdBQ3ZCZ0QsUUFBUXdMLElBQUksa0JBQW9CeE8sRUFBS2QsT0FDckN3SCxFQUFNaUUsU0FBUzNLLEVBQUs0SyxNQUFPNUssRUFBS2QsTUFDcEMsSUFFQThRLEVBQ0tsUSxpQkFDQUwsS0FBS2lILEVBQU0yRCxhQUFhZ0QsS0FBSzNHLElBQU8sT0FDOUIsU0FBQzdCLEdBQ1I3QixRQUFROUIsTUFBTTJELEVBQ2xCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9iYXNlL3Byb2R1Y3RBUEkudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYmFzZS9hcGkudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYmFzZS9ldmVudHMudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYmFzZS9hYnN0cmFjdC50cyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9iYXNlL3BhZ2UudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYmFzZS9wb3B1cC50cyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi9hcGknO1xuLy8gRXh0ZW5kIHRoZSBiYXNlIEFQSSBjbGFzcyB0byBpbXBsZW1lbnQgdGhlIFByb2R1Y3QgQVBJXG5leHBvcnQgY2xhc3MgUHJvZHVjdEFQSSBleHRlbmRzIEFwaSB7XG4gICAgLy8gQ29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgQ0ROLCBiYXNlIFVSTCwgYW5kIG9wdGlvbnNcbiAgICBjb25zdHJ1Y3RvcihjZG4sIGJhc2VVcmwsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoYmFzZVVybCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY2RuID0gY2RuO1xuICAgIH1cbiAgICAvLyBGZXRjaCBkZXRhaWxzIG9mIGEgc3BlY2lmaWMgcHJvZHVjdCBieSBJRFxuICAgIGdldFByb2R1Y3RJdGVtKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldChgL3Byb2R1Y3QvJHtpZH1gKS50aGVuKChpdGVtKSA9PiAoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpdGVtKSwgeyBpbWFnZTogdGhpcy5jZG4gKyBpdGVtLmltYWdlIH0pKSk7XG4gICAgfVxuICAgIC8vIEZldGNoIGEgbGlzdCBvZiBhbGwgcHJvZHVjdHMsIGluY2x1ZGluZyBDRE4gcGF0aCBmb3IgaW1hZ2VzXG4gICAgZ2V0UHJvZHVjdExpc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnL3Byb2R1Y3QnKS50aGVuKChkYXRhKSA9PiBkYXRhLml0ZW1zLm1hcCgoaXRlbSkgPT4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaXRlbSksIHsgaW1hZ2U6IHRoaXMuY2RuICsgaXRlbS5pbWFnZSB9KSkpKTtcbiAgICB9XG4gICAgLy8gUGxhY2UgYW4gb3JkZXIgZm9yIHByb2R1Y3RzXG4gICAgb3JkZXJQcm9kdWN0KG9yZGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3QoJy9vcmRlcicsIG9yZGVyKS50aGVuKChkYXRhKSA9PiBkYXRhKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuYXNzaWduKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LCAoKF9hID0gb3B0aW9ucy5oZWFkZXJzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5vaylcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHsgdmFyIF9hOyByZXR1cm4gUHJvbWlzZS5yZWplY3QoKF9hID0gZGF0YS5lcnJvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogcmVzcG9uc2Uuc3RhdHVzVGV4dCk7IH0pO1xuICAgIH1cbiAgICBnZXQodXJpKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmksIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgeyBtZXRob2Q6ICdHRVQnIH0pKS50aGVuKHRoaXMuaGFuZGxlUmVzcG9uc2UpO1xuICAgIH1cbiAgICBwb3N0KHVyaSwgZGF0YSwgbWV0aG9kID0gJ1BPU1QnKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmksIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgeyBtZXRob2QsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIH0pKS50aGVuKHRoaXMuaGFuZGxlUmVzcG9uc2UpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBBUElfVVJMID0gYCR7cHJvY2Vzcy5lbnYuQVBJX09SSUdJTn0vYXBpL3dlYmxhcmVrYDsgLy8gRW5kcG9pbnQgZm9yIFdlYkxhcmVrIEFQSVxuZXhwb3J0IGNvbnN0IENETl9VUkwgPSBgJHtwcm9jZXNzLmVudi5BUElfT1JJR0lOfS9jb250ZW50L3dlYmxhcmVrYDsgLy8gQ0ROIFVSTCBmb3IgV2ViTGFyZWsgY29udGVudFxuLy8gQ29uZmlndXJhdGlvbiBzZXR0aW5nc1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICAgIC8vIFRlbXBsYXRlIGlkZW50aWZpZXJzXG4gICAgdGVtcGxhdGVDYXJkOiAnY2FyZC1jYXRhbG9nJyxcbiAgICB0ZW1wbGF0ZVByZXY6ICdjYXJkLXByZXZpZXcnLFxuICAgIHRlbXBsYXRlQmFzazogJ2NhcmQtYmFza2V0JyxcbiAgICBiYXNrZXRUZW1wbGF0ZTogJ2Jhc2tldCcsXG4gICAgb3JkZXJUZW1wbGF0ZTogJ29yZGVyJyxcbiAgICBjb250YWN0c1RlbXBsYXRlOiAnY29udGFjdHMnLFxuICAgIHN1Y2Nlc3NUZW1wbGF0ZTogJ3N1Y2Nlc3MnLFxuICAgIG1vZGFsVGVtcGxhdGU6ICdtb2RhbCcsXG4gICAgbW9kYWxDb250YWluZXI6ICdtb2RhbC1jb250YWluZXInLFxuICAgIC8vIENTUyBjbGFzc2VzIGZvciBwYWdlIGVsZW1lbnRzXG4gICAgY2xhc3Nlczoge1xuICAgICAgICBoZWFkZXJCYXNrZXRDb3VudGVyOiAnLmhlYWRlcl9fYmFza2V0LWNvdW50ZXInLFxuICAgICAgICBnYWxsZXJ5OiAnLmdhbGxlcnknLFxuICAgICAgICBwYWdlV3JhcHBlcjogJy5wYWdlX193cmFwcGVyJyxcbiAgICAgICAgaGVhZGVyQmFza2V0OiAnLmhlYWRlcl9fYmFza2V0JyAvLyBDU1MgY2xhc3MgZm9yIHRoZSBiYXNrZXQgYnV0dG9uIGluIHRoZSBoZWFkZXJcbiAgICB9LFxuICAgIC8vIEFkZGl0aW9uYWwgZWxlbWVudHMgaW4gdGhlIGNhcmQgdGVtcGxhdGVcbiAgICBjYXJkRWxlbWVudHM6IHtcbiAgICAgICAgaW1hZ2U6ICcuY2FyZF9faW1hZ2UnLFxuICAgICAgICB0aXRsZTogJy5jYXJkX190aXRsZScsXG4gICAgICAgIGNhdGVnb3J5OiAnLmNhcmRfX2NhdGVnb3J5JyxcbiAgICAgICAgcHJpY2U6ICcuY2FyZF9fcHJpY2UnIC8vIENTUyBjbGFzcyBmb3IgdGhlIGNhcmQgcHJpY2UgZWxlbWVudFxuICAgIH1cbn07XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFzY2FsVG9LZWJhYih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oW2EtejDigJM5XSkoW0EtWl0pL2csIFwiJDEtJDJcIikudG9Mb3dlckNhc2UoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NlbGVjdG9yKHgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB4ID09PSBcInN0cmluZ1wiKSAmJiB4Lmxlbmd0aCA+IDE7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUFsbEVsZW1lbnRzKHNlbGVjdG9yRWxlbWVudCwgY29udGV4dCA9IGRvY3VtZW50KSB7XG4gICAgaWYgKGlzU2VsZWN0b3Ioc2VsZWN0b3JFbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JFbGVtZW50KSk7XG4gICAgfVxuICAgIGlmIChzZWxlY3RvckVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShzZWxlY3RvckVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RvckVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RvckVsZW1lbnQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzZWxlY3RvciBlbGVtZW50YCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlRWxlbWVudChzZWxlY3RvckVsZW1lbnQsIGNvbnRleHQpIHtcbiAgICBpZiAoaXNTZWxlY3RvcihzZWxlY3RvckVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZW5zdXJlQWxsRWxlbWVudHMoc2VsZWN0b3JFbGVtZW50LCBjb250ZXh0KTtcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc2VsZWN0b3IgJHtzZWxlY3RvckVsZW1lbnR9IHJldHVybiBtb3JlIHRoZW4gb25lIGVsZW1lbnRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNlbGVjdG9yICR7c2VsZWN0b3JFbGVtZW50fSByZXR1cm4gbm90aGluZ2ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50cy5wb3AoKTtcbiAgICB9XG4gICAgaWYgKHNlbGVjdG9yRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RvckVsZW1lbnQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBzZWxlY3RvciBlbGVtZW50Jyk7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUZW1wbGF0ZShxdWVyeSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZW5zdXJlRWxlbWVudChxdWVyeSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJlbShibG9jaywgZWxlbWVudCwgbW9kaWZpZXIpIHtcbiAgICBsZXQgbmFtZSA9IGJsb2NrO1xuICAgIGlmIChlbGVtZW50KVxuICAgICAgICBuYW1lICs9IGBfXyR7ZWxlbWVudH1gO1xuICAgIGlmIChtb2RpZmllcilcbiAgICAgICAgbmFtZSArPSBgXyR7bW9kaWZpZXJ9YDtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBjbGFzczogYC4ke25hbWV9YFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JqZWN0UHJvcGVydGllcyhvYmosIGZpbHRlcikge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkpXG4gICAgICAgIC5maWx0ZXIoKFtuYW1lLCBwcm9wXSkgPT4gZmlsdGVyID8gZmlsdGVyKG5hbWUsIHByb3ApIDogKG5hbWUgIT09ICdjb25zdHJ1Y3RvcicpKVxuICAgICAgICAubWFwKChbbmFtZSwgcHJvcF0pID0+IG5hbWUpO1xufVxuLyoqXG4gKiDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiBkYXRhc2V0INCw0YLRgNC40LHRg9GC0Ysg0Y3Qu9C10LzQtdC90YLQsFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RWxlbWVudERhdGEoZWwsIGRhdGEpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGVsLmRhdGFzZXRba2V5XSA9IFN0cmluZyhkYXRhW2tleV0pO1xuICAgIH1cbn1cbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiDRgtC40L/QuNC30LjRgNC+0LLQsNC90L3Ri9C1INC00LDQvdC90YvQtSDQuNC3IGRhdGFzZXQg0LDRgtGA0LjQsdGD0YLQvtCyINGN0LvQtdC80LXQvdGC0LBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREYXRhKGVsLCBzY2hlbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZWwuZGF0YXNldCkge1xuICAgICAgICBkYXRhW2tleV0gPSBzY2hlbWVba2V5XShlbC5kYXRhc2V0W2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cbi8qKlxuICog0J/RgNC+0LLQtdGA0LrQsCDQvdCwINC/0YDQvtGB0YLQvtC5INC+0LHRitC10LrRglxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTtcbiAgICByZXR1cm4gcHJvdG90eXBlID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pIHx8XG4gICAgICAgIHByb3RvdHlwZSA9PT0gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jvb2xlYW4odikge1xuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nO1xufVxuLyoqXG4gKiDQpNCw0LHRgNC40LrQsCBET00t0Y3Qu9C10LzQtdC90YLQvtCyINCyINC/0YDQvtGB0YLQtdC50YjQtdC5INGA0LXQsNC70LjQt9Cw0YbQuNC4XG4gKiDQt9C00LXRgdGMINC90LUg0YPRh9GC0LXQvdC+INC80L3QvtCz0L4g0YTQsNC60YLQvtGA0L7QslxuICog0LIg0LjQvdGC0LXRgNC90LXRgiDQvNC+0LbQvdC+INC90LDQudGC0Lgg0LHQvtC70LXQtSDQv9C+0LvQvdGL0LUg0YDQtdCw0LvQuNC30LDRhtC40LhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BzW2tleV07XG4gICAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiYga2V5ID09PSAnZGF0YXNldCcpIHtcbiAgICAgICAgICAgICAgICBzZXRFbGVtZW50RGF0YShlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZpeCBpbmRleGluZyBsYXRlclxuICAgICAgICAgICAgICAgIGVsZW1lbnRba2V5XSA9IGlzQm9vbGVhbih2YWx1ZSkgPyB2YWx1ZSA6IFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgQXJyYXkuaXNBcnJheShjaGlsZHJlbikgPyBjaGlsZHJlbiA6IFtjaGlsZHJlbl0pIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudDtcbn1cbiIsIi8qKlxuICog0JHRgNC+0LrQtdGAINGB0L7QsdGL0YLQuNC5LCDQutC70LDRgdGB0LjRh9C10YHQutCw0Y8g0YDQtdCw0LvQuNC30LDRhtC40Y9cbiAqINCSINGA0LDRgdGI0LjRgNC10L3QvdGL0YUg0LLQsNGA0LjQsNC90YLQsNGFINC10YHRgtGMINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0L/QvtC00L/QuNGB0LDRgtGM0YHRjyDQvdCwINCy0YHQtSDRgdC+0LHRi9GC0LjRj1xuICog0LjQu9C4INGB0LvRg9GI0LDRgtGMINGB0L7QsdGL0YLQuNGPINC/0L4g0YjQsNCx0LvQvtC90YMg0L3QsNC/0YDQuNC80LXRgFxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDQo9GB0YLQsNC90L7QstC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwINGB0L7QsdGL0YLQuNC1XG4gICAgICovXG4gICAgb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5fZXZlbnRzLmhhcyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9ldmVudHMuc2V0KGV2ZW50TmFtZSwgbmV3IFNldCgpKTtcbiAgICAgICAgfVxuICAgICAgICAoX2EgPSB0aGlzLl9ldmVudHMuZ2V0KGV2ZW50TmFtZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDQodC90Y/RgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INGBINGB0L7QsdGL0YLQuNGPXG4gICAgICovXG4gICAgb2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5fZXZlbnRzLmhhcyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9ldmVudHMuZ2V0KGV2ZW50TmFtZSkuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5fZXZlbnRzLmdldChldmVudE5hbWUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2l6ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHMuZGVsZXRlKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICog0JjQvdC40YbQuNC40YDQvtCy0LDRgtGMINGB0L7QsdGL0YLQuNC1INGBINC00LDQvdC90YvQvNC4XG4gICAgICovXG4gICAgZW1pdChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzLmZvckVhY2goKHN1YnNjcmliZXJzLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAobmFtZSBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBuYW1lLnRlc3QoZXZlbnROYW1lKSB8fCBuYW1lID09PSBldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVycy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKGRhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqINCh0LvRg9GI0LDRgtGMINCy0YHQtSDRgdC+0LHRi9GC0LjRj1xuICAgICAqL1xuICAgIG9uQWxsKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub24oXCIqXCIsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog0KHQsdGA0L7RgdC40YLRjCDQstGB0LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxuICAgICAqL1xuICAgIG9mZkFsbCgpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDQodC00LXQu9Cw0YLRjCDQutC+0LvQu9Cx0LXQuiDRgtGA0LjQs9Cz0LXRgCwg0LPQtdC90LXRgNC40YDRg9GO0YnQuNC5INGB0L7QsdGL0YLQuNC1INC/0YDQuCDQstGL0LfQvtCy0LVcbiAgICAgKi9cbiAgICB0cmlnZ2VyKGV2ZW50TmFtZSwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gKGV2ZW50ID0ge30pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChldmVudE5hbWUsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgKGV2ZW50IHx8IHt9KSksIChjb250ZXh0IHx8IHt9KSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cbiIsIi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgY29tcG9uZW50cy5cbiAqIEB0ZW1wbGF0ZSBUIC0gR2VuZXJpYyB0eXBlIGZvciBjb21wb25lbnQgZGF0YS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgYSBjbGFzcyBvbiBhbiBIVE1MIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgLSBUaGUgSFRNTCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgLSBUaGUgY2xhc3MgbmFtZSB0byB0b2dnbGUuXG4gICAgICogQHBhcmFtIHtib29sZWFuIHwgdW5kZWZpbmVkfSBzdGF0ZSAtIE9wdGlvbmFsIHN0YXRlIHRvIGZvcmNlIHRvZ2dsZS5cbiAgICAgKi9cbiAgICB0b2dnbGVDbGFzcyhlbCwgY2xhc3NOYW1lLCBzdGF0ZSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgc3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb250ZW50IG9uIGFuIEhUTUwgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCAtIFRoZSBIVE1MIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHt1bmtub3dufSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQgYXMgdGV4dCBjb250ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBhZGRpdGlvbmFsVGV4dCAtIE9wdGlvbmFsIGFkZGl0aW9uYWwgdGV4dC5cbiAgICAgKi9cbiAgICBzZXRUZXh0KGVsLCB2YWx1ZSwgYWRkaXRpb25hbFRleHQpIHtcbiAgICAgICAgZWwudGV4dENvbnRlbnQgPSBTdHJpbmcodmFsdWUpICsgKGFkZGl0aW9uYWxUZXh0IHx8ICcnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlIHRoZSAnZGlzYWJsZWQnIGF0dHJpYnV0ZSBvbiBhbiBIVE1MIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgLSBUaGUgSFRNTCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RhdGUgLSBUaGUgc3RhdGUgdG8gc2V0IGZvciB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWQoZWwsIHN0YXRlKSB7XG4gICAgICAgIGVsID09PSBudWxsIHx8IGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbC50b2dnbGVBdHRyaWJ1dGUoYGRpc2FibGVkYCwgc3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIaWRlIGFuIEhUTUwgZWxlbWVudCBieSBzZXR0aW5nIGl0cyBkaXNwbGF5IHByb3BlcnR5IHRvICdub25lJy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCAtIFRoZSBIVE1MIGVsZW1lbnQuXG4gICAgICovXG4gICAgc2V0SGlkZShlbCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaG93IGFuIEhUTUwgZWxlbWVudCBieSByZW1vdmluZyBpdHMgJ2Rpc3BsYXknIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIC0gVGhlIEhUTUwgZWxlbWVudC5cbiAgICAgKi9cbiAgICBzZXRWaXNpYmxlKGVsKSB7XG4gICAgICAgIGVsID09PSBudWxsIHx8IGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShgZGlzcGxheWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNvdXJjZSBhbmQgYWx0IGF0dHJpYnV0ZXMgb2YgYW4gaW1hZ2UgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR9IGVsIC0gVGhlIGltYWdlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyAtIFRoZSBzb3VyY2UgVVJMIGZvciB0aGUgaW1hZ2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFsdCAtIFRoZSBhbHRlcm5hdGl2ZSB0ZXh0IGZvciB0aGUgaW1hZ2UuXG4gICAgICovXG4gICAgc2V0SW1hZ2UoZWwsIHNyYywgYWx0KSB7XG4gICAgICAgIGVsLnNyYyA9IHNyYztcbiAgICAgICAgZWwuYWx0ID0gYWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGNvbXBvbmVudCB3aXRoIG9wdGlvbmFsIGRhdGEuXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPFQ+IHwgdW5kZWZpbmVkfSBkYXRhIC0gT3B0aW9uYWwgZGF0YSB0byByZW5kZXIuXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50fSAtIFRoZSByZW5kZXJlZCBIVE1MIGVsZW1lbnQuXG4gICAgICovXG4gICAgcmVuZGVyKGRhdGEpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCA/IGRhdGEgOiB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG59XG4vKipcbiAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgb2JqZWN0TW9kZWwgY2xhc3MuXG4gKiBAcGFyYW0ge3Vua25vd259IG9iaiAtIFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7b2JqIGlzIG9iamVjdE1vZGVsPGFueT59IC0gVHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGFuIG9iamVjdE1vZGVsIGluc3RhbmNlLlxuICovXG5leHBvcnQgY29uc3QgaXNPYmplY3RNb2RlbCA9IChvYmopID0+IHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2Ygb2JqZWN0TW9kZWw7XG59O1xuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyBmb3IgY3JlYXRpbmcgb2JqZWN0IG1vZGVscyB3aXRoIGV2ZW50IGVtaXNzaW9uLlxuICogQHRlbXBsYXRlIFQgLSBHZW5lcmljIHR5cGUgZm9yIG9iamVjdCBtb2RlbCBkYXRhLlxuICovXG5leHBvcnQgY2xhc3Mgb2JqZWN0TW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBkYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdCBjaGFuZ2VzIHVzaW5nIHRoZSBhc3NvY2lhdGVkIGV2ZW50IGVtaXR0ZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2dCAtIFRoZSBldmVudCB0byBlbWl0LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0IHwgdW5kZWZpbmVkfSBwYXlsb2FkIC0gT3B0aW9uYWwgcGF5bG9hZCB0byBzZW5kIHdpdGggdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIGVtaXRDaGFuZ2VzKGV2dCwgcGF5bG9hZCkge1xuICAgICAgICB0aGlzLmV2ZW50LmVtaXQoZXZ0LCBwYXlsb2FkICE9PSBudWxsICYmIHBheWxvYWQgIT09IHZvaWQgMCA/IHBheWxvYWQgOiB7fSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYmVtLCBlbnN1cmVFbGVtZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBvYmplY3RNb2RlbCB9IGZyb20gJy4vYWJzdHJhY3QnO1xuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudHMnO1xuLy8gUmVwcmVzZW50cyB0aGUgbWFpbiBwYWdlIG9mIHRoZSBhcHBsaWNhdGlvblxuZXhwb3J0IGNsYXNzIFBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgZXZlbnRzKSB7XG4gICAgICAgIHN1cGVyKGNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuICAgICAgICBjb25zdCBnZXRFbGVtZW50ID0gKHNlbGVjdG9yKSA9PiBlbnN1cmVFbGVtZW50KHNlbGVjdG9yLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuX2NvdW50ZXIgPSBnZXRFbGVtZW50KHNldHRpbmdzLmNsYXNzZXMuaGVhZGVyQmFza2V0Q291bnRlcik7XG4gICAgICAgIHRoaXMuX2NhdGFsb2d1ZSA9IGdldEVsZW1lbnQoc2V0dGluZ3MuY2xhc3Nlcy5nYWxsZXJ5KTtcbiAgICAgICAgdGhpcy5fd3JhcHBlciA9IGdldEVsZW1lbnQoc2V0dGluZ3MuY2xhc3Nlcy5wYWdlV3JhcHBlcik7XG4gICAgICAgIHRoaXMuX2Jhc2tldCA9IGdldEVsZW1lbnQoc2V0dGluZ3MuY2xhc3Nlcy5oZWFkZXJCYXNrZXQpO1xuICAgICAgICB0aGlzLl9iYXNrZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmV2ZW50cy5lbWl0KCdiYXNrZXQ6b3BlbicpKTtcbiAgICB9XG4gICAgc2V0IGNvdW50ZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRUZXh0KHRoaXMuX2NvdW50ZXIsIFN0cmluZyh2YWx1ZSkpO1xuICAgIH1cbiAgICBzZXQgY2F0YWxvZ3VlKGl0ZW1zKSB7XG4gICAgICAgIHRoaXMuX2NhdGFsb2d1ZS5yZXBsYWNlQ2hpbGRyZW4oLi4uaXRlbXMpO1xuICAgIH1cbiAgICBzZXQgbG9ja2VkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQ2xhc3ModGhpcy5fd3JhcHBlciwgJ3BhZ2VfX3dyYXBwZXJfbG9ja2VkJywgdmFsdWUpO1xuICAgIH1cbn1cbi8vIFJlcHJlc2VudHMgdGhlIHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvblxuZXhwb3J0IGNsYXNzIFN0YXRlIGV4dGVuZHMgb2JqZWN0TW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm9yZGVyID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgcGhvbmU6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgICAgICBwYXltZW50OiAnJyxcbiAgICAgICAgICAgIHRvdGFsOiBudWxsLFxuICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZvcm1PcmRlckVycm9ycyA9IHt9O1xuICAgICAgICB0aGlzLmZvcm1Db250YWN0c0Vycm9ycyA9IHt9O1xuICAgIH1cbiAgICB0b2dnbGVPcmRlckl0ZW0oaWQsIGlzSW5jbHVkZWQpIHtcbiAgICAgICAgaWYgKGlzSW5jbHVkZWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXIuaXRlbXMgPSBbLi4ubmV3IFNldChbLi4udGhpcy5vcmRlci5pdGVtcywgaWRdKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVyLml0ZW1zID0gdGhpcy5vcmRlci5pdGVtcy5maWx0ZXIoKGl0KSA9PiBpdCAhPT0gaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyQmFza2V0KCkge1xuICAgICAgICB0aGlzLm9yZGVyLml0ZW1zLmZvckVhY2goKGlkKSA9PiB0aGlzLnRvZ2dsZU9yZGVySXRlbShpZCwgZmFsc2UpKTtcbiAgICAgICAgdGhpcy5jbGVhck9yZGVyRmllbGRzKCk7XG4gICAgICAgIHRoaXMuZW1pdENoYW5nZXMoJ2Jhc2tldDpjaGFuZ2VkJywgeyBvcmRlcjogdGhpcy5vcmRlciB9KTtcbiAgICB9XG4gICAgdG90YWwoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5vcmRlci50b3RhbCA9IHRoaXMub3JkZXIuaXRlbXMucmVkdWNlKChhY2MsIGN1cnIpID0+IHsgdmFyIF9hOyByZXR1cm4gYWNjICsgTnVtYmVyKCgoX2EgPSB0aGlzLmNhdGFsb2d1ZS5maW5kKChpdCkgPT4gaXQuaWQgPT09IGN1cnIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJpY2UpIHx8IDApOyB9LCAwKSk7XG4gICAgfVxuICAgIHNldENhdGFsb2d1ZShpdGVtcykge1xuICAgICAgICB0aGlzLmNhdGFsb2d1ZSA9IGl0ZW1zO1xuICAgICAgICB0aGlzLmVtaXRDaGFuZ2VzKCdpdGVtczpjaGFuZ2VkJywgeyBjYXRhbG9ndWU6IHRoaXMuY2F0YWxvZ3VlIH0pO1xuICAgIH1cbiAgICBnZXRDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2F0YWxvZ3VlLmZpbHRlcigoaXRlbSkgPT4gdGhpcy5vcmRlci5pdGVtcy5pbmNsdWRlcyhpdGVtLmlkKSk7XG4gICAgfVxuICAgIGlzRmlsbGVkRmllbGRzT3JkZXIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMub3JkZXIuYWRkcmVzcyAmJiAhIXRoaXMub3JkZXIucGF5bWVudDtcbiAgICB9XG4gICAgaXNGaWxsZWRGaWVsZHNDb250YWN0cygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5vcmRlci5lbWFpbCAmJiAhIXRoaXMub3JkZXIucGhvbmU7XG4gICAgfVxuICAgIGNsZWFyT3JkZXJGaWVsZHMoKSB7XG4gICAgICAgIHRoaXMub3JkZXIuZW1haWwgPSAnJztcbiAgICAgICAgdGhpcy5vcmRlci5hZGRyZXNzID0gJyc7XG4gICAgICAgIHRoaXMub3JkZXIucGF5bWVudCA9ICcnO1xuICAgICAgICB0aGlzLm9yZGVyLnBob25lID0gJyc7XG4gICAgfVxuICAgIHNldEZpZWxkKGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLm9yZGVyW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICBpZiAoWydhZGRyZXNzJywgJ3BheW1lbnQnXS5pbmNsdWRlcyhmaWVsZCkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVPcmRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2VtYWlsJywgJ3Bob25lJ10uaW5jbHVkZXMoZmllbGQpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ29udGFjdHMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWxpZGF0ZU9yZGVyKCkge1xuICAgICAgICBjb25zdCBlcnJvcnMgPSB7fTtcbiAgICAgICAgaWYgKCF0aGlzLm9yZGVyLmFkZHJlc3MpXG4gICAgICAgICAgICBlcnJvcnMuYWRkcmVzcyA9ICfQndC10L7QsdGF0L7QtNC40LzQviDRg9C60LDQt9Cw0YLRjCDQsNC00YDQtdGBJztcbiAgICAgICAgaWYgKCF0aGlzLm9yZGVyLnBheW1lbnQpXG4gICAgICAgICAgICBlcnJvcnMucGF5bWVudCA9ICfQndC10L7QsdGF0L7QtNC40LzQviDRg9C60LDQt9Cw0YLRjCDRgdC/0L7RgdC+0LEg0L7Qv9C70LDRgtGLJztcbiAgICAgICAgdGhpcy5mb3JtT3JkZXJFcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHRoaXMuZXZlbnQuZW1pdCgnZm9ybU9yZGVyRXJyb3JzOmNoYW5nZScsIHRoaXMuZm9ybU9yZGVyRXJyb3JzKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICB2YWxpZGF0ZUNvbnRhY3RzKCkge1xuICAgICAgICBjb25zdCBlcnJvcnMgPSB7fTtcbiAgICAgICAgaWYgKCF0aGlzLm9yZGVyLmVtYWlsKVxuICAgICAgICAgICAgZXJyb3JzLmVtYWlsID0gJ9Cd0LXQvtCx0YXQvtC00LjQvNC+INGD0LrQsNC30LDRgtGMIGVtYWlsJztcbiAgICAgICAgaWYgKCF0aGlzLm9yZGVyLnBob25lKVxuICAgICAgICAgICAgZXJyb3JzLnBob25lID0gJ9Cd0LXQvtCx0YXQvtC00LjQvNC+INGD0LrQsNC30LDRgtGMINGC0LXQu9C10YTQvtC9JztcbiAgICAgICAgdGhpcy5mb3JtQ29udGFjdHNFcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHRoaXMuZXZlbnQuZW1pdCgnZm9ybUNvbnRhY3RzRXJyb3JzOmNoYW5nZScsIHRoaXMuZm9ybUNvbnRhY3RzRXJyb3JzKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwO1xuICAgIH1cbn1cbi8vIFJlcHJlc2VudHMgYSBjYXJkIGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyBwcm9kdWN0IGluZm9ybWF0aW9uXG5leHBvcnQgY2xhc3MgQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoYmxvY2tOYW1lLCBjb250YWluZXIsIGFjdCkge1xuICAgICAgICBzdXBlcihjb250YWluZXIpO1xuICAgICAgICB0aGlzLmJsb2NrTmFtZSA9IGJsb2NrTmFtZTtcbiAgICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBnZXR0aW5nIGVsZW1lbnRzIGJ5IHNlbGVjdG9yXG4gICAgICAgIGNvbnN0IGdldEVsZW1lbnQgPSAoc2VsZWN0b3IpID0+IGVuc3VyZUVsZW1lbnQoc2VsZWN0b3IsIGNvbnRhaW5lcik7XG4gICAgICAgIC8vIEFzc2lnbmluZyBlbGVtZW50cyB0byBjbGFzcyBwcm9wZXJ0aWVzXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZ2V0RWxlbWVudChgLiR7YmxvY2tOYW1lfV9fdGl0bGVgKTtcbiAgICAgICAgdGhpcy5faW1hZ2UgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgLiR7YmxvY2tOYW1lfV9faW1hZ2VgKTtcbiAgICAgICAgdGhpcy5fcHJpY2UgPSBnZXRFbGVtZW50KGAuJHtibG9ja05hbWV9X19wcmljZWApO1xuICAgICAgICB0aGlzLl9jYXRlZ29yeSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGAuJHtibG9ja05hbWV9X19jYXRlZ29yeWApO1xuICAgICAgICB0aGlzLl9idXR0b25Nb2RhbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGAuJHtibG9ja05hbWV9X19idXR0b25gKTtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgLiR7YmxvY2tOYW1lfV9fdGV4dGApO1xuICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnQgdG8gdGhlIGJ1dHRvbiBpZiBwcm92aWRlZFxuICAgICAgICBpZiAoYWN0ID09PSBudWxsIHx8IGFjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0Lm9uQ2xpY2spIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9idXR0b25Nb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2J1dHRvbk1vZGFsLnRleHRDb250ZW50ID0gJ9Ca0YPQv9C40YLRjCc7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnV0dG9uTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3Qub25DbGljayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3Qub25DbGljayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTWV0aG9kIHRvIGluZGljYXRlIGlmIHRoZSBjYXJkIGlzIGVtcHR5IG9yIG5vdFxuICAgIGlzRW1wdHkodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgICAgICA/IHRoaXMuc2V0VGV4dCh0aGlzLl9idXR0b25Nb2RhbCwgJ9CSINC60L7RgNC30LjQvdGDJylcbiAgICAgICAgICAgIDogdGhpcy5zZXRUZXh0KHRoaXMuX2J1dHRvbk1vZGFsLCAn0JrRg9C/0LjRgtGMJyk7XG4gICAgfVxuICAgIC8vIFNldHRlciBhbmQgZ2V0dGVyIGZvciB0aGUgcHJvZHVjdCBpZFxuICAgIHNldCBpZCh2YWx1ZSkgeyB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LmlkID0gdmFsdWU7IH1cbiAgICA7XG4gICAgZ2V0IGlkKCkgeyByZXR1cm4gdGhpcy5jb250YWluZXIuZGF0YXNldC5pZCB8fCAnJzsgfVxuICAgIC8vIFNldHRlciBhbmQgZ2V0dGVyIGZvciB0aGUgcHJvZHVjdCB0aXRsZVxuICAgIHNldCB0aXRsZSh2YWx1ZSkgeyB0aGlzLnNldFRleHQodGhpcy5fdGl0bGUsIHZhbHVlKTsgfVxuICAgIDtcbiAgICBnZXQgdGl0bGUoKSB7IHJldHVybiB0aGlzLl90aXRsZS50ZXh0Q29udGVudCB8fCAnJzsgfVxuICAgIDtcbiAgICAvLyBTZXR0ZXIgZm9yIHRoZSBwcm9kdWN0IGltYWdlXG4gICAgc2V0IGltYWdlKHZhbHVlKSB7IHRoaXMuc2V0VGV4dCh0aGlzLl9pbWFnZSwgdmFsdWUpOyB9XG4gICAgO1xuICAgIC8vIFNldHRlciBmb3IgdGhlIHByb2R1Y3QgcHJpY2Ugd2l0aCB2YWxpZGF0aW9uIGZvciB6ZXJvIHZhbHVlXG4gICAgc2V0IHByaWNlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0VGV4dCh0aGlzLl9wcmljZSwgdmFsdWUgKyAnINGB0LjQvdCw0L/RgdC+0LInKTtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcHJpY2UudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzYWJsZWQodGhpcy5fYnV0dG9uTW9kYWwsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIDtcbiAgICAvLyBTZXR0ZXIgZm9yIHRoZSBwcm9kdWN0IGNhdGVnb3J5IHdpdGggbWFwcGluZyB0byBjb3JyZXNwb25kaW5nIENTUyBjbGFzc1xuICAgIHNldCBjYXRlZ29yeSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBjYXRlZ29yeVNraWxsID0ge1xuICAgICAgICAgICAgJ9GB0L7RhNGCLdGB0LrQuNC7JzogJ3NvZnQnLFxuICAgICAgICAgICAgJ9GF0LDRgNC0LdGB0LrQuNC7JzogJ2hhcmQnLFxuICAgICAgICAgICAgJ9C60L3QvtC/0LrQsCc6ICdidXR0b24nLFxuICAgICAgICAgICAgJ9C00YDRg9Cz0L7QtSc6ICdvdGhlcicsXG4gICAgICAgICAgICAn0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L7QtSc6ICdhZGRpdGlvbmFsJyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlDbGFzcyA9IGJlbSh0aGlzLmJsb2NrTmFtZSwgJ2NhdGVnb3J5JywgY2F0ZWdvcnlTa2lsbFt2YWx1ZV0pLm5hbWU7XG4gICAgICAgIHRoaXMuc2V0VGV4dCh0aGlzLl9jYXRlZ29yeSwgdmFsdWUpO1xuICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuX2NhdGVnb3J5LCBjYXRlZ29yeUNsYXNzLCB0cnVlKTtcbiAgICB9XG4gICAgLy8gU2V0dGVyIGZvciB0aGUgcHJvZHVjdCBkZXNjcmlwdGlvbiB3aXRoIHN1cHBvcnQgZm9yIG11bHRpcGxlIHBhcmFncmFwaHNcbiAgICBzZXQgZGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuX2Rlc2NyaXB0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVwbGFjZVdpdGgoLi4udmFsdWUubWFwKChpKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRzYyA9IChfYSA9IHRoaXMuX2Rlc2NyaXB0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dChkc2MsIGkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkc2M7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBlbnN1cmVFbGVtZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9hYnN0cmFjdCc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi9wYWdlJztcbi8vIENsYXNzIGZvciBQb3B1cCBDb21wb25lbnQsIGV4dGVuZGluZyB0aGUgYmFzZSBDb21wb25lbnQgY2xhc3NcbmV4cG9ydCBjbGFzcyBQb3B1cENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBldmVudHMpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XG4gICAgICAgIHRoaXMuX2Nsb3NlQnRuID0gZW5zdXJlRWxlbWVudCgnLm1vZGFsX19jbG9zZScsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5fY29udGVudCA9IGVuc3VyZUVsZW1lbnQoJy5tb2RhbF9fY29udGVudCcsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuX2NvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICB9XG4gICAgLy8gU2V0dGVyIGZvciBjb250ZW50IHRvIHJlcGxhY2UgZXhpc3RpbmcgY29udGVudCB3aXRoIGEgbmV3IG9uZVxuICAgIHNldCBjb250ZW50KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NvbnRlbnQucmVwbGFjZUNoaWxkcmVuKHZhbHVlKTtcbiAgICB9XG4gICAgLy8gTWV0aG9kIHRvIG9wZW4gdGhlIHBvcHVwIGFuZCBlbWl0IGFuIGV2ZW50XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWxfYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ21vZGFsOm9wZW4nKTtcbiAgICB9XG4gICAgLy8gTWV0aG9kIHRvIGNsb3NlIHRoZSBwb3B1cCwgY2xlYXIgY29udGVudCwgYW5kIGVtaXQgYW4gZXZlbnRcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuY29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ21vZGFsOmNsb3NlJyk7XG4gICAgfVxuICAgIC8vIFJlbmRlciBtZXRob2QgdG8gZGlzcGxheSB0aGUgcG9wdXAgd2l0aCBzcGVjaWZpZWQgY29udGVudFxuICAgIHJlbmRlcihkYXRhKSB7XG4gICAgICAgIHN1cGVyLnJlbmRlcihkYXRhKTtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG59XG4vLyBDbGFzcyBmb3IgQmFza2V0IENvbXBvbmVudCwgZXh0ZW5kaW5nIHRoZSBiYXNlIENvbXBvbmVudCBjbGFzc1xuZXhwb3J0IGNsYXNzIEJhc2tldCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBldmVudHMpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XG4gICAgICAgIHRoaXMuX2xpc3QgPSBlbnN1cmVFbGVtZW50KCcuYmFza2V0X19saXN0JywgdGhpcy5jb250YWluZXIpO1xuICAgICAgICB0aGlzLl90b3RhbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3ByaWNlJyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX2J1dHRvbicpO1xuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3Igb3BlbmluZyB0aGUgb3JkZXIgZm9ybVxuICAgICAgICB0aGlzLl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBldmVudHMuZW1pdCgnb3JkZXI6b3BlbicpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIH1cbiAgICAvLyBTZXR0ZXIgZm9yIGl0ZW1zIHRvIHVwZGF0ZSB0aGUgYmFza2V0IGxpc3RcbiAgICBzZXQgaXRlbXMoaXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fbGlzdC5yZXBsYWNlQ2hpbGRyZW4oLi4uaXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGlzdC5yZXBsYWNlQ2hpbGRyZW4oY3JlYXRlRWxlbWVudCgncCcsIHsgdGV4dENvbnRlbnQ6IGDQmtC+0YDQt9C40L3QsCDQv9GD0YHRgtCwYCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgO1xuICAgIH1cbiAgICAvLyBHZXR0ZXIgZm9yIGl0ZW1zIHRvIHJldHJpZXZlIHRoZSBjdXJyZW50IGJhc2tldCBpdGVtc1xuICAgIGdldCBpdGVtcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xpc3QuY2hpbGRFbGVtZW50Q291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCgncCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IGDQmtC+0YDQt9C40L3QsCDQv9GD0YHRgtCwYFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2xpc3QuY2hpbGRyZW4pO1xuICAgIH1cbiAgICAvLyBTZXR0ZXIgZm9yIHNlbGVjdGVkIGl0ZW1zIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBvcmRlciBidXR0b25cbiAgICBzZXQgc2VsZWN0ZWQoaXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXREaXNhYmxlZCh0aGlzLl9idXR0b24sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzYWJsZWQodGhpcy5fYnV0dG9uLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXR0ZXIgZm9yIHRvdGFsIHRvIGRpc3BsYXkgdGhlIHRvdGFsIHByaWNlXG4gICAgc2V0IHRvdGFsKHRvdGFsKSB7XG4gICAgICAgIHRoaXMuc2V0VGV4dCh0aGlzLl90b3RhbCwgdG90YWwgKyAnINGB0LjQvdCw0L/RgdC+0LInKTtcbiAgICB9XG59XG4vLyBDbGFzcyBmb3IgRm9ybSBDb21wb25lbnQsIGV4dGVuZGluZyB0aGUgYmFzZSBDb21wb25lbnQgY2xhc3NcbmV4cG9ydCBjbGFzcyBGb3JtIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGV2ZW50cykge1xuICAgICAgICBzdXBlcihjb250YWluZXIpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVuc3VyZUVsZW1lbnQoJy5mb3JtX19lcnJvcnMnLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBpbnB1dCBjaGFuZ2VzIGluIHRoZSBmb3JtXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0YXJnZXQubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vbklucHV0Q2hhbmdlKGZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBNZXRob2QgdG8gaGFuZGxlIGlucHV0IGNoYW5nZXMgYW5kIGVtaXQgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnRcbiAgICBvbklucHV0Q2hhbmdlKGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KGBvcmRlcjpjaGFuZ2VgLCB7IGZpZWxkLCB2YWx1ZSB9KTtcbiAgICB9XG4gICAgLy8gTWV0aG9kIHRvIGhhbmRsZSBwYXltZW50IG1ldGhvZCBjaGFuZ2VzIGFuZCBlbWl0IHRoZSBjb3JyZXNwb25kaW5nIGV2ZW50XG4gICAgb25QYXltZW50Q2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQYXltZW50IG1ldGhvZCBjaGFuZ2VkOicsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChgb3JkZXI6Y2hhbmdlYCwgeyBmaWVsZDogJ3BheW1lbnQnLCB2YWx1ZSB9KTtcbiAgICB9XG4gICAgLy8gU2V0dGVyIGZvciBlcnJvcnMgdG8gZGlzcGxheSBmb3JtIGVycm9yc1xuICAgIHNldCBlcnJvcnModmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRUZXh0KHRoaXMuX2Vycm9ycywgdmFsdWUpO1xuICAgIH1cbiAgICAvLyBSZW5kZXIgbWV0aG9kIHRvIGRpc3BsYXkgdGhlIGZvcm0gd2l0aCB0aGUgc3BlY2lmaWVkIHN0YXRlXG4gICAgcmVuZGVyKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsaWRhdGlvbiwgZXJyb3JzIH0gPSBzdGF0ZSwgaW5wdXRzID0gX19yZXN0KHN0YXRlLCBbXCJ2YWxpZGF0aW9uXCIsIFwiZXJyb3JzXCJdKTtcbiAgICAgICAgc3VwZXIucmVuZGVyKHsgdmFsaWRhdGlvbiwgZXJyb3JzIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG59XG4vLyBDbGFzcyBmb3IgQ29udGFjdCBDb21wb25lbnQsIGV4dGVuZGluZyB0aGUgRm9ybSBDb21wb25lbnRcbmV4cG9ydCBjbGFzcyBDb250YWN0IGV4dGVuZHMgRm9ybSB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBldmVudHMpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyLCBldmVudHMpO1xuICAgICAgICB0aGlzLl9zdWJtaXQgPSBlbnN1cmVFbGVtZW50KCdidXR0b25bdHlwZT1zdWJtaXRdJywgdGhpcy5jb250YWluZXIpO1xuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3Igc3VibWl0dGluZyB0aGUgZm9ybSAob3BlbmluZyBvcmRlciBmb3JtKVxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ29yZGVyOnN1Ym1pdCcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0IHZhbGlkKHZhbHVlKSB7IHRoaXMuX3N1Ym1pdC5kaXNhYmxlZCA9ICF2YWx1ZTsgfVxuICAgIDsgLy8gU2V0dGVyIGZvciB2YWxpZCB0byBlbmFibGUvZGlzYWJsZSB0aGUgc3VibWl0IGJ1dHRvblxuICAgIHNldCBwaG9uZSh2YWx1ZSkgeyB0aGlzLmNvbnRhaW5lci5lbGVtZW50cy5uYW1lZEl0ZW0oJ3Bob25lJykudmFsdWUgPSB2YWx1ZTsgfVxuICAgIDsgLy8gU2V0dGVyIGZvciBwaG9uZSBpbnB1dCB2YWx1ZVxuICAgIHNldCBlbWFpbCh2YWx1ZSkgeyB0aGlzLmNvbnRhaW5lci5lbGVtZW50cy5uYW1lZEl0ZW0oJ2VtYWlsJykudmFsdWUgPSB2YWx1ZTsgfVxuICAgIDsgLy8gU2V0dGVyIGZvciBlbWFpbCBpbnB1dCB2YWx1ZVxufVxuLy8gQ2xhc3MgZm9yIE9yZGVyIENvbXBvbmVudCwgZXh0ZW5kaW5nIHRoZSBGb3JtIENvbXBvbmVudFxuZXhwb3J0IGNsYXNzIE9yZGVyIGV4dGVuZHMgRm9ybSB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBldmVudHMpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyLCBldmVudHMpO1xuICAgICAgICB0aGlzLl9zdWJtaXQgPSBlbnN1cmVFbGVtZW50KCdidXR0b25bdHlwZT1zdWJtaXRdJywgdGhpcy5jb250YWluZXIpO1xuICAgICAgICB0aGlzLl9idG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignW25hbWU9Y2FzaF0nKTtcbiAgICAgICAgdGhpcy5fYnRuQ2FyZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbbmFtZT1jYXJkXScpO1xuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgcGF5bWVudCBtZXRob2QgY2hhbmdlIChvZmZsaW5lKVxuICAgICAgICBpZiAodGhpcy5fYnRuKSB7XG4gICAgICAgICAgICB0aGlzLl9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0J1dHRvbiBjbGlja2VkIC0gb2ZmbGluZScpO1xuICAgICAgICAgICAgICAgIHRoaXMub25QYXltZW50Q2hhbmdlKCdvZmZsaW5lJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnRuLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbl9hbHQtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2J0bkNhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnRuQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fYWx0LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBwYXltZW50IG1ldGhvZCBjaGFuZ2UgKG9ubGluZSlcbiAgICAgICAgaWYgKHRoaXMuX2J0bkNhcmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2J0bkNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0J1dHRvbiBjbGlja2VkIC0gb25saW5lJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblBheW1lbnRDaGFuZ2UoJ29ubGluZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2J0bkNhcmQuY2xhc3NMaXN0LmFkZCgnYnV0dG9uX2FsdC1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fYnRuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2J0bi5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fYWx0LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBzdWJtaXR0aW5nIHRoZSBmb3JtIChvcGVuaW5nIGNvbnRhY3QgZm9ybSlcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KCdjb250YWN0czpvcGVuJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBTZXR0ZXIgZm9yIHZhbGlkIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uXG4gICAgc2V0IHZhbGlkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdC5kaXNhYmxlZCA9ICF2YWx1ZTtcbiAgICB9XG4gICAgLy8gU2V0dGVyIGZvciBhZGRyZXNzIGlucHV0IHZhbHVlXG4gICAgc2V0IGFkZHJlc3ModmFsdWUpIHsgdGhpcy5jb250YWluZXIuZWxlbWVudHMubmFtZWRJdGVtKCdhZGRyZXNzJykudmFsdWUgPSB2YWx1ZTsgfVxufVxuLy8gQ2xhc3MgZm9yIEJhc2tldEl0ZW0gQ29tcG9uZW50LCBleHRlbmRpbmcgdGhlIENhcmQgQ29tcG9uZW50XG5leHBvcnQgY2xhc3MgQmFza2V0SXRlbSBleHRlbmRzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgYWN0KSB7XG4gICAgICAgIHN1cGVyKCdjYXJkJywgY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhc2tldF9faXRlbS1pbmRleCcpO1xuICAgICAgICB0aGlzLl9idG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhc2tldF9faXRlbS1kZWxldGUnKTtcbiAgICAgICAgdGhpcy5fYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWN0Lm9uQ2xpY2spOyAvLyBFdmVudCBsaXN0ZW5lciBmb3IgZGVsZXRpbmcgdGhlIGJhc2tldCBpdGVtXG4gICAgfVxuICAgIHNldCBpbmRleCh2YWx1ZSkgeyB0aGlzLnNldFRleHQodGhpcy5faW5kZXgsIHZhbHVlKTsgfSAvLyBTZXR0ZXIgZm9yIGluZGV4IHRvIGRpc3BsYXkgdGhlIGJhc2tldCBpdGVtIGluZGV4XG59XG4vLyBDbGFzcyBmb3IgU3VjY2VzcyBDb21wb25lbnQsIGV4dGVuZGluZyB0aGUgYmFzZSBDb21wb25lbnQgY2xhc3NcbmV4cG9ydCBjbGFzcyBTdWNjZXNzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGFjdCkge1xuICAgICAgICBzdXBlcihjb250YWluZXIpO1xuICAgICAgICB0aGlzLl90b3RhbCA9IGVuc3VyZUVsZW1lbnQoJy5vcmRlci1zdWNjZXNzX19kZXNjcmlwdGlvbicsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5fY2xvc2UgPSBlbnN1cmVFbGVtZW50KCcuYnV0dG9uJywgdGhpcy5jb250YWluZXIpO1xuICAgICAgICB0aGlzLl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjdC5vbkNsaWNrKTsgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGNsb3NpbmcgdGhlIHN1Y2Nlc3MgcG9wdXBcbiAgICB9XG4gICAgc2V0IHRvdGFsKHRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHN5bmFwc2VUZXh0ID0gdG90YWwgPT09IDEgPyAn0YHQuNC90LDQv9GBJyA6ICfRgdC40L3QsNC/0YHQvtCyJztcbiAgICAgICAgdGhpcy5zZXRUZXh0KHRoaXMuX3RvdGFsLCBg0KHQv9C40YHQsNC90L4gJHt0b3RhbH0gJHtzeW5hcHNlVGV4dH1gKTsgLy8gU2V0dGVyIGZvciB0b3RhbCB0byBkaXNwbGF5IHRoZSB0b3RhbCBudW1iZXIgb2Ygc3luYXBzZXMgd2l0aCBjb3JyZWN0IHBsdXJhbGl6YXRpb25cbiAgICB9XG59XG4iLCIvLyBJbXBvcnRpbmcgZ2xvYmFsIHN0eWxlc1xuaW1wb3J0ICcuL3Njc3Mvc3R5bGVzLnNjc3MnO1xuLy8gSW1wb3J0aW5nIG5lY2Vzc2FyeSBtb2R1bGVzIGFuZCBjb25zdGFudHNcbmltcG9ydCB7IFByb2R1Y3RBUEkgfSBmcm9tICcuL2NvbXBvbmVudHMvYmFzZS9wcm9kdWN0QVBJJztcbmltcG9ydCB7IEFQSV9VUkwsIENETl9VUkwsIHNldHRpbmdzIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMnOyAvLyBJbXBvcnRpbmcgc2V0dGluZ3MgZnJvbSBjb25zdGFudHNcbmltcG9ydCB7IGVuc3VyZUVsZW1lbnQsIGNsb25lVGVtcGxhdGUgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJy4vY29tcG9uZW50cy9iYXNlL2V2ZW50cyc7XG5pbXBvcnQgeyBQb3B1cENvbXBvbmVudCwgQmFza2V0LCBCYXNrZXRJdGVtLCBPcmRlciwgQ29udGFjdCwgU3VjY2VzcyB9IGZyb20gJy4vY29tcG9uZW50cy9iYXNlL3BvcHVwJztcbmltcG9ydCB7IENhcmQsIFBhZ2UsIFN0YXRlIH0gZnJvbSAnLi9jb21wb25lbnRzL2Jhc2UvcGFnZSc7XG4vLyBJbml0aWFsaXppbmcgQVBJIGFuZCBldmVudCBlbWl0dGVyXG5jb25zdCBhcGkgPSBuZXcgUHJvZHVjdEFQSShDRE5fVVJMLCBBUElfVVJMKTtcbmNvbnN0IGV2ZW50cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbi8vIFJldHJpZXZpbmcgdGVtcGxhdGUgZWxlbWVudHMgYmFzZWQgb24gc2V0dGluZ3NcbmNvbnN0IGNhcmRDYXRhbG9nVGVtcGxhdGUgPSBlbnN1cmVFbGVtZW50KGAjJHtzZXR0aW5ncy50ZW1wbGF0ZUNhcmR9YCk7XG5jb25zdCBjYXJkUHJldmlld1RlbXBsYXRlID0gZW5zdXJlRWxlbWVudChgIyR7c2V0dGluZ3MudGVtcGxhdGVQcmV2fWApO1xuY29uc3QgYmFza2V0VGVtcGxhdGUgPSBlbnN1cmVFbGVtZW50KGAjJHtzZXR0aW5ncy5iYXNrZXRUZW1wbGF0ZX1gKTtcbmNvbnN0IGJhc2tldENhcmRUZW1wbGF0ZSA9IGVuc3VyZUVsZW1lbnQoYCMke3NldHRpbmdzLnRlbXBsYXRlQmFza31gKTtcbmNvbnN0IG9yZGVyVGVtcGxhdGUgPSBlbnN1cmVFbGVtZW50KGAjJHtzZXR0aW5ncy5vcmRlclRlbXBsYXRlfWApO1xuY29uc3QgY29udGFjdHNUZW1wbGF0ZSA9IGVuc3VyZUVsZW1lbnQoYCMke3NldHRpbmdzLmNvbnRhY3RzVGVtcGxhdGV9YCk7XG5jb25zdCBzdWNjZXNzVGVtcGxhdGUgPSBlbnN1cmVFbGVtZW50KGAjJHtzZXR0aW5ncy5zdWNjZXNzVGVtcGxhdGV9YCk7XG4vLyBJbml0aWFsaXppbmcgYXBwbGljYXRpb24gc3RhdGUsIHBhZ2UsIGFuZCBwb3B1cCBjb21wb25lbnRzXG5jb25zdCBzdGF0ZSA9IG5ldyBTdGF0ZSh7fSwgZXZlbnRzKTtcbmNvbnN0IHBhZ2UgPSBuZXcgUGFnZShkb2N1bWVudC5ib2R5LCBldmVudHMpO1xuY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBDb21wb25lbnQoZW5zdXJlRWxlbWVudChgIyR7c2V0dGluZ3MubW9kYWxDb250YWluZXJ9YCksIGV2ZW50cyk7XG4vLyBJbml0aWFsaXppbmcgYmFza2V0LCBvcmRlciwgYW5kIGNvbnRhY3QgY29tcG9uZW50c1xuY29uc3QgYmFza2V0ID0gbmV3IEJhc2tldChjbG9uZVRlbXBsYXRlKGJhc2tldFRlbXBsYXRlKSwgZXZlbnRzKTtcbmNvbnN0IG9yZGVyID0gbmV3IE9yZGVyKGNsb25lVGVtcGxhdGUob3JkZXJUZW1wbGF0ZSksIGV2ZW50cyk7XG5jb25zdCBjb250YWN0ID0gbmV3IENvbnRhY3QoY2xvbmVUZW1wbGF0ZShjb250YWN0c1RlbXBsYXRlKSwgZXZlbnRzKTtcbi8vIEhhbmRsaW5nIGV2ZW50IHRvIG9wZW4gYmFza2V0IHBvcHVwXG5ldmVudHMub24oJ2Jhc2tldDpvcGVuJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdFdmVudCBiYXNrZXQ6b3BlbiB3YXMgaGFuZGxlZCcpO1xuICAgIHBvcHVwLnJlbmRlcih7XG4gICAgICAgIGNvbnRlbnQ6IGJhc2tldC5yZW5kZXIoKSxcbiAgICB9KTtcbn0pO1xuLy8gTG9nZ2luZyBjb25zdGFudHMgYW5kIGluaXRpYWwgYmFza2V0IGNvbnRlbnRcbmNvbnNvbGUubG9nKCdDRE5fVVJMOicsIENETl9VUkwpO1xuY29uc29sZS5sb2coJ0FQSV9VUkw6JywgQVBJX1VSTCk7XG5jb25zb2xlLmxvZygnQmFza2V0IFJlbmRlciBDb250ZW50OicsIGJhc2tldC5yZW5kZXIoKSk7XG4vLyBIYW5kbGluZyBpdGVtcyBjaGFuZ2UgZXZlbnRcbmV2ZW50cy5vbignaXRlbXM6Y2hhbmdlZCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnSXRlbXMgY2hhbmdlZCBldmVudCB0cmlnZ2VyZWQnKTtcbiAgICBjb25zb2xlLmxvZygnQ3VycmVudCBzdGF0ZSBjYXRhbG9ndWU6Jywgc3RhdGUuY2F0YWxvZ3VlKTtcbiAgICBwYWdlLmNhdGFsb2d1ZSA9IHN0YXRlLmNhdGFsb2d1ZS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGBjYXJkYCwgY2xvbmVUZW1wbGF0ZShjYXJkQ2F0YWxvZ1RlbXBsYXRlKSwge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50cy5lbWl0KCdjYXJkOnNlbGVjdCcsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNhcmQucmVuZGVyKHtcbiAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICBpbWFnZTogaXRlbS5pbWFnZSxcbiAgICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4vLyBIYW5kbGluZyBiYXNrZXQgY2hhbmdlIGV2ZW50XG5ldmVudHMub24oJ2Jhc2tldDpjaGFuZ2VkJywgKCkgPT4ge1xuICAgIGJhc2tldC5pdGVtcyA9IHN0YXRlLmdldENhcmRzKCkubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQmFza2V0SXRlbShjbG9uZVRlbXBsYXRlKGJhc2tldENhcmRUZW1wbGF0ZSksIHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS50b2dnbGVPcmRlckl0ZW0oaXRlbS5pZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHBhZ2UuY291bnRlciA9IHN0YXRlLm9yZGVyLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBiYXNrZXQuaXRlbXMgPSBiYXNrZXQuaXRlbXMuZmlsdGVyKChpKSA9PiBpLmRhdGFzZXQuaWQgIT09IGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgIGJhc2tldC50b3RhbCA9IHN0YXRlLnRvdGFsKCk7XG4gICAgICAgICAgICAgICAgYmFza2V0LnNlbGVjdGVkID0gc3RhdGUub3JkZXIuaXRlbXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNhcmQucmVuZGVyKHtcbiAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICBwcmljZTogaXRlbS5wcmljZSxcbiAgICAgICAgICAgIGluZGV4OiBpICsgMSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcGFnZS5jb3VudGVyID0gc3RhdGUub3JkZXIuaXRlbXMubGVuZ3RoO1xuICAgIGJhc2tldC50b3RhbCA9IHN0YXRlLnRvdGFsKCk7XG4gICAgYmFza2V0LnNlbGVjdGVkID0gc3RhdGUub3JkZXIuaXRlbXM7XG59KTtcbi8vIEhhbmRsaW5nIGNhcmQgc2VsZWN0aW9uIGV2ZW50XG5ldmVudHMub24oJ2NhcmQ6c2VsZWN0JywgKGl0ZW0pID0+IHtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgICBjb25zb2xlLmxvZygnaXRlbScgKyBpdGVtKTtcbiAgICAgICAgYXBpLmdldFByb2R1Y3RJdGVtKGl0ZW0uaWQpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoJ2NhcmQnLCBjbG9uZVRlbXBsYXRlKGNhcmRQcmV2aWV3VGVtcGxhdGUpLCB7XG4gICAgICAgICAgICAgICAgb25DbGljazogKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBldnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuLnRleHRDb250ZW50ID09PSAn0JrRg9C/0LjRgtGMJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ9CSINC60L7RgNC30LjQvdGDJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRvZ2dsZU9yZGVySXRlbShyZXMuaWQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5jb3VudGVyID0gc3RhdGUub3JkZXIuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzLmVtaXQoJ2Jhc2tldDpjaGFuZ2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYnRuLnRleHRDb250ZW50ID09PSAn0JIg0LrQvtGA0LfQuNC90YMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHMuZW1pdCgnYmFza2V0Om9wZW4nLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXJkLmlzRW1wdHkoc3RhdGUub3JkZXIuaXRlbXMuaW5jbHVkZXMocmVzLmlkKSk7XG4gICAgICAgICAgICBwb3B1cC5yZW5kZXIoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNhcmQucmVuZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHJlcy5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHJlcy5wcmljZSxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHJlcy5jYXRlZ29yeVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgdGhlcmVzIG5vdCBpdGVtOiBgICsgaXRlbSk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGB0aGVyZXMgbW9yZSBsb25nIGAgKyBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBvcHVwLmNsb3NlKCk7XG4gICAgfVxufSk7XG4vLyBIYW5kbGluZyBvcmRlciBvcGVuIGV2ZW50XG5ldmVudHMub24oJ29yZGVyOm9wZW4nLCAoKSA9PiB7XG4gICAgcG9wdXAucmVuZGVyKHtcbiAgICAgICAgY29udGVudDogb3JkZXIucmVuZGVyKHtcbiAgICAgICAgICAgIGFkZHJlc3M6IHN0YXRlLm9yZGVyLmFkZHJlc3MsXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBzdGF0ZS5pc0ZpbGxlZEZpZWxkc09yZGVyKCksXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICB9KSxcbiAgICB9KTtcbn0pO1xuLy8gSGFuZGxpbmcgY29udGFjdHMgb3BlbiBldmVudFxuZXZlbnRzLm9uKCdjb250YWN0czpvcGVuJywgKCkgPT4ge1xuICAgIHBvcHVwLnJlbmRlcih7XG4gICAgICAgIGNvbnRlbnQ6IGNvbnRhY3QucmVuZGVyKHtcbiAgICAgICAgICAgIGVtYWlsOiBzdGF0ZS5vcmRlci5lbWFpbCxcbiAgICAgICAgICAgIHBob25lOiBzdGF0ZS5vcmRlci5waG9uZSxcbiAgICAgICAgICAgIHZhbGlkYXRpb246IHN0YXRlLmlzRmlsbGVkRmllbGRzQ29udGFjdHMoKSxcbiAgICAgICAgICAgIGVycm9yczogW10sXG4gICAgICAgIH0pLFxuICAgIH0pO1xufSk7XG4vLyBIYW5kbGluZyBmb3JtIG9yZGVyIGVycm9ycyBjaGFuZ2UgZXZlbnRcbmV2ZW50cy5vbignZm9ybU9yZGVyRXJyb3JzOmNoYW5nZScsIChlcnJvcnMpID0+IHtcbiAgICBjb25zdCB7IGFkZHJlc3MsIHBheW1lbnQgfSA9IGVycm9ycztcbiAgICBvcmRlci52YWxpZCA9ICFhZGRyZXNzICYmICFwYXltZW50O1xuICAgIG9yZGVyLmVycm9ycyA9IE9iamVjdC52YWx1ZXMoeyBhZGRyZXNzLCBwYXltZW50IH0pXG4gICAgICAgIC5maWx0ZXIoKGkpID0+ICEhaSlcbiAgICAgICAgLmpvaW4oJzsgJyk7XG59KTtcbi8vIEhhbmRsaW5nIGZvcm0gY29udGFjdHMgZXJyb3JzIGNoYW5nZSBldmVudFxuZXZlbnRzLm9uKCdmb3JtQ29udGFjdHNFcnJvcnM6Y2hhbmdlJywgKGVycm9ycykgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBob25lIH0gPSBlcnJvcnM7XG4gICAgY29udGFjdC52YWxpZCA9ICFlbWFpbCAmJiAhcGhvbmU7XG4gICAgY29udGFjdC5lcnJvcnMgPSBPYmplY3QudmFsdWVzKHsgZW1haWwsIHBob25lIH0pXG4gICAgICAgIC5maWx0ZXIoKGkpID0+ICEhaSlcbiAgICAgICAgLmpvaW4oJzsgJyk7XG59KTtcbi8vIEhhbmRsaW5nIG1vZGFsIG9wZW4gZXZlbnRcbmV2ZW50cy5vbignbW9kYWw6b3BlbicsICgpID0+IHtcbiAgICBwYWdlLmxvY2tlZCA9IHRydWU7XG59KTtcbi8vIEhhbmRsaW5nIG1vZGFsIGNsb3NlIGV2ZW50XG5ldmVudHMub24oJ21vZGFsOmNsb3NlJywgKCkgPT4ge1xuICAgIHBhZ2UubG9ja2VkID0gZmFsc2U7XG59KTtcbi8vIEhhbmRsaW5nIG9yZGVyIHN1Ym1pdCBldmVudFxuZXZlbnRzLm9uKCdvcmRlcjpzdWJtaXQnLCAoKSA9PiB7XG4gICAgYXBpXG4gICAgICAgIC5vcmRlclByb2R1Y3Qoc3RhdGUub3JkZXIpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgc3RhdGUuY2xlYXJCYXNrZXQoKTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IG5ldyBTdWNjZXNzKGNsb25lVGVtcGxhdGUoc3VjY2Vzc1RlbXBsYXRlKSwge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcG9wdXAucmVuZGVyKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN1Y2Nlc3MucmVuZGVyKHtcbiAgICAgICAgICAgICAgICB0b3RhbDogcmVzLnRvdGFsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59KTtcbi8vIEhhbmRsaW5nIG9yZGVyIGNoYW5nZSBldmVudFxuZXZlbnRzLm9uKCdvcmRlcjpjaGFuZ2UnLCAoZGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBzaHRvIHRha29lIGRhdGFgICsgZGF0YS52YWx1ZSk7XG4gICAgc3RhdGUuc2V0RmllbGQoZGF0YS5maWVsZCwgZGF0YS52YWx1ZSk7XG59KTtcbi8vIEZldGNoaW5nIHByb2R1Y3QgbGlzdCBmcm9tIHRoZSBBUElcbmFwaVxuICAgIC5nZXRQcm9kdWN0TGlzdCgpXG4gICAgLnRoZW4oc3RhdGUuc2V0Q2F0YWxvZ3VlLmJpbmQoc3RhdGUpKVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xufSk7XG4iXSwibmFtZXMiOlsiUHJvZHVjdEFQSSIsIl9BcGkiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfY3JlYXRlU3VwZXIiLCJjZG4iLCJiYXNlVXJsIiwib3B0aW9ucyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiY2FsbCIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiZ2V0UHJvZHVjdEl0ZW0iLCJpZCIsIl90aGlzMiIsInRoaXMiLCJnZXQiLCJjb25jYXQiLCJ0aGVuIiwiaXRlbSIsIk9iamVjdCIsImFzc2lnbiIsImltYWdlIiwiZ2V0UHJvZHVjdExpc3QiLCJfdGhpczMiLCJkYXRhIiwiaXRlbXMiLCJtYXAiLCJvcmRlclByb2R1Y3QiLCJvcmRlciIsInBvc3QiLCJBcGkiLCJfYSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImhlYWRlcnMiLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImVycm9yIiwic3RhdHVzVGV4dCIsInVyaSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBUElfVVJMIiwicHJvY2VzcyIsIkNETl9VUkwiLCJzZXR0aW5ncyIsImhlYWRlckJhc2tldENvdW50ZXIiLCJnYWxsZXJ5IiwicGFnZVdyYXBwZXIiLCJoZWFkZXJCYXNrZXQiLCJpc1NlbGVjdG9yIiwieCIsImVuc3VyZUVsZW1lbnQiLCJzZWxlY3RvckVsZW1lbnQiLCJjb250ZXh0IiwiZWxlbWVudHMiLCJlbnN1cmVBbGxFbGVtZW50cyIsImRvY3VtZW50IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIk5vZGVMaXN0IiwiaXNBcnJheSIsIkVycm9yIiwiY29uc29sZSIsIndhcm4iLCJwb3AiLCJIVE1MRWxlbWVudCIsImNsb25lVGVtcGxhdGUiLCJxdWVyeSIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsInNldEVsZW1lbnREYXRhIiwiZWwiLCJkYXRhc2V0IiwiU3RyaW5nIiwiY3JlYXRlRWxlbWVudCIsInRhZ05hbWUiLCJwcm9wcyIsImNoaWxkcmVuIiwib2JqIiwicHJvdG90eXBlIiwiZWxlbWVudCIsImdldFByb3RvdHlwZU9mIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInMiLCJuIiwiZG9uZSIsImNoaWxkIiwiYXBwZW5kIiwiZXJyIiwiZSIsImYiLCJFdmVudEVtaXR0ZXIiLCJfZXZlbnRzIiwiTWFwIiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImhhcyIsInNldCIsIlNldCIsImFkZCIsIm9mZiIsInNpemUiLCJlbWl0IiwiZm9yRWFjaCIsInN1YnNjcmliZXJzIiwibmFtZSIsIlJlZ0V4cCIsInRlc3QiLCJvbkFsbCIsIm9mZkFsbCIsInRyaWdnZXIiLCJldmVudCIsIkNvbXBvbmVudCIsImNvbnRhaW5lciIsInRvZ2dsZUNsYXNzIiwiY2xhc3NOYW1lIiwic3RhdGUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzZXRUZXh0IiwiYWRkaXRpb25hbFRleHQiLCJ0ZXh0Q29udGVudCIsInNldERpc2FibGVkIiwidG9nZ2xlQXR0cmlidXRlIiwic2V0SGlkZSIsInN0eWxlIiwiZGlzcGxheSIsInNldFZpc2libGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldEltYWdlIiwic3JjIiwiYWx0IiwicmVuZGVyIiwib2JqZWN0TW9kZWwiLCJlbWl0Q2hhbmdlcyIsImV2dCIsInBheWxvYWQiLCJQYWdlIiwiX0NvbXBvbmVudCIsImV2ZW50cyIsImdldEVsZW1lbnQiLCJzZWxlY3RvciIsIl9jb3VudGVyIiwiX2NhdGFsb2d1ZSIsIl93cmFwcGVyIiwiX2Jhc2tldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdGhpcyRfY2F0YWxvZ3VlIiwicmVwbGFjZUNoaWxkcmVuIiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJTdGF0ZSIsIl9vYmplY3RNb2RlbCIsIl9zdXBlcjIiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsInBheW1lbnQiLCJ0b3RhbCIsImZvcm1PcmRlckVycm9ycyIsImZvcm1Db250YWN0c0Vycm9ycyIsInRvZ2dsZU9yZGVySXRlbSIsImlzSW5jbHVkZWQiLCJmaWx0ZXIiLCJpdCIsImNsZWFyQmFza2V0IiwiY2xlYXJPcmRlckZpZWxkcyIsIl90aGlzNCIsInJlZHVjZSIsImFjYyIsImN1cnIiLCJOdW1iZXIiLCJjYXRhbG9ndWUiLCJmaW5kIiwicHJpY2UiLCJzZXRDYXRhbG9ndWUiLCJnZXRDYXJkcyIsIl90aGlzNSIsImluY2x1ZGVzIiwiaXNGaWxsZWRGaWVsZHNPcmRlciIsImlzRmlsbGVkRmllbGRzQ29udGFjdHMiLCJzZXRGaWVsZCIsImZpZWxkIiwidmFsaWRhdGVPcmRlciIsInZhbGlkYXRlQ29udGFjdHMiLCJlcnJvcnMiLCJrZXlzIiwiQ2FyZCIsIl9Db21wb25lbnQyIiwiX3N1cGVyMyIsImJsb2NrTmFtZSIsImFjdCIsIl90aGlzNiIsIl90aXRsZSIsIl9pbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJfcHJpY2UiLCJfY2F0ZWdvcnkiLCJfYnV0dG9uTW9kYWwiLCJfZGVzY3JpcHRpb24iLCJvbkNsaWNrIiwiaXNFbXB0eSIsImNhdGVnb3J5Q2xhc3MiLCJiZW0iLCJibG9jayIsIm1vZGlmaWVyIiwiY2xhc3MiLCJfYTIiLCJfdGhpczciLCJyZXBsYWNlV2l0aCIsImkiLCJkc2MiLCJfX3Jlc3QiLCJ0IiwicCIsImhhc093blByb3BlcnR5IiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiUG9wdXBDb21wb25lbnQiLCJfY2xvc2VCdG4iLCJfY29udGVudCIsImNsb3NlIiwiYmluZCIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJzdG9wUHJvcGFnYXRpb24iLCJvcGVuIiwicmVtb3ZlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsIkJhc2tldCIsIl9saXN0IiwiX3RvdGFsIiwiX2J1dHRvbiIsImNoaWxkRWxlbWVudENvdW50IiwiX3RoaXMkX2xpc3QiLCJGb3JtIiwiX0NvbXBvbmVudDMiLCJfZXJyb3JzIiwidGFyZ2V0Iiwib25JbnB1dENoYW5nZSIsIm9uUGF5bWVudENoYW5nZSIsImxvZyIsInZhbGlkYXRpb24iLCJpbnB1dHMiLCJDb250YWN0IiwiX0Zvcm0iLCJfc3VwZXI0IiwiX3N1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZWQiLCJuYW1lZEl0ZW0iLCJPcmRlciIsIl9Gb3JtMiIsIl9zdXBlcjUiLCJfYnRuIiwiX2J0bkNhcmQiLCJCYXNrZXRJdGVtIiwiX0NhcmQiLCJfc3VwZXI2IiwiX2luZGV4IiwiU3VjY2VzcyIsIl9Db21wb25lbnQ0IiwiX3N1cGVyNyIsIl9jbG9zZSIsInN5bmFwc2VUZXh0IiwiYXBpIiwiY2FyZENhdGFsb2dUZW1wbGF0ZSIsImNhcmRQcmV2aWV3VGVtcGxhdGUiLCJiYXNrZXRUZW1wbGF0ZSIsImJhc2tldENhcmRUZW1wbGF0ZSIsIm9yZGVyVGVtcGxhdGUiLCJjb250YWN0c1RlbXBsYXRlIiwic3VjY2Vzc1RlbXBsYXRlIiwicGFnZSIsInBvcHVwIiwiYmFza2V0IiwiY29udGFjdCIsInRpdGxlIiwiY2F0ZWdvcnkiLCJjYXJkIiwiY291bnRlciIsInNlbGVjdGVkIiwiaW5kZXgiLCJyZXMiLCJidG4iLCJkZXNjcmlwdGlvbiIsInZhbGlkIiwidmFsdWVzIiwiam9pbiIsImxvY2tlZCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9